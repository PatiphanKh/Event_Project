<?php
// à¸šà¸±à¸‡à¸„à¸±à¸šà¸¥à¹‡à¸­à¸à¸­à¸´à¸™
if (!isset($_SESSION['uid'])) { header('Location: /login'); exit; }

$eid = $_GET['id'] ?? null;
if (!$eid) { header('Location: /my-events'); exit; }

$event = getEventById($eid);

// ğŸ”’ à¸”à¸±à¸à¹„à¸§à¹‰à¹„à¸¡à¹ˆà¹ƒà¸«à¹‰à¸„à¸™à¸­à¸·à¹ˆà¸™à¹€à¸™à¸µà¸¢à¸™à¹€à¸‚à¹‰à¸²à¸¡à¸²à¸”à¸¹ à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸„à¸™à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
if (!$event || $event['creator_uid'] != $_SESSION['uid']) {
    die("à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¹ƒà¸™à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸™à¸µà¹‰");
}

// à¹€à¸£à¸µà¸¢à¸à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸”à¸¶à¸‡à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸„à¸™à¸‚à¸­à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
$participants = getEventParticipants($eid);

// à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸›à¹ƒà¸«à¹‰à¸«à¸™à¹‰à¸² HTML
renderView('event-manage', [
    'event' => $event,
    'participants' => $participants
]);